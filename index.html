<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>JSON-Only Media Gallery</title>
<style>
body { font-family: Arial, sans-serif; margin: 20px; background: #f4f7f9; color: #333; }
h1 { text-align: center; margin-bottom: 20px; }
#mediaContainer { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; }
.media-item { background: white; border-radius: 10px; box-shadow: 0 4px 10px rgba(0,0,0,0.1); padding: 10px; flex: 1 1 250px; max-width: 300px; text-align: center; }
.media-item img, .media-item video, .media-item audio, .media-item iframe { width: 100%; height: auto; border-radius: 5px; margin-top: 10px; }
p { margin-top: 8px; font-weight: bold; color: #555; text-align: center; word-break: break-word; }
</style>
</head>
<body>

<h1>JSON Media Gallery</h1>
<div id="mediaContainer"></div>

<script>
const container = document.getElementById('mediaContainer');

// Detect file type
function detectFileType(url){
    if(url.includes('drive.google.com')) return 'drive';
    const ext = url.split('.').pop().toLowerCase();
    if(['jpg','jpeg','png','gif','webp'].includes(ext)) return 'image';
    if(['mp4','webm','ogg'].includes(ext)) return 'video';
    if(['mp3','wav','ogg'].includes(ext)) return 'audio';
    if(['pdf'].includes(ext)) return 'pdf';
    return 'other'
    const embedUrl = file.url.includes('/view') ? file.url.replace('/view','/preview') : file.url;;
}

// Render gallery from JSON
fetch('media.json')
.then(res => res.json())
.then(mediaFiles => {
    mediaFiles.forEach(file => {
        const div = document.createElement('div');
        div.className = 'media-item';

        const type = file.type || detectFileType(file.url);

        if(type === 'image'){
            const img = document.createElement('img');
            img.src = file.url;
            img.alt = file.name || 'Image';
            div.appendChild(img);
        } else if(type === 'video'){
            const video = document.createElement('video');
            video.controls = true;
            const source = document.createElement('source');
            source.src = file.url;
            source.type = 'video/mp4';
            video.appendChild(source);
            div.appendChild(video);
        } else if(type === 'audio'){
            const audio = document.createElement('audio');
            audio.controls = true;
            audio.src = file.url;
            div.appendChild(audio);
        } else if(type === 'pdf'){
            const iframe = document.createElement('iframe');
            iframe.src = file.url;
            div.appendChild(iframe);
        } else if(type === 'drive'){
            const embedUrl = file.url.includes('/view') ? file.url.replace('/view','/preview') : file.url;
            const iframe = document.createElement('iframe');
            iframe.src = embedUrl;
            div.appendChild(iframe);
        } else{
            const p = document.createElement('p');
            p.textContent = "Unsupported file type";
            div.appendChild(p);
        }

        const pName = document.createElement('p');
        pName.textContent = file.name || 'No Name';
        div.appendChild(pName);

        container.appendChild(div);
    });
})
.catch(err => console.error("Error loading JSON:", err));
</script>

</body>
</html>